{%- paginate search.results by 20 -%}
  <div class="page-width page-content">
    {%- render 'breadcrumbs' -%}

    {% render 'header-search' %}

    {%- if search.performed -%}
      <hr class="hr--medium">

      <div class="section-header">
        <h2 class="section-header__title">
          {{ 'general.search.result_count' | t: count: search.results_count }}
        </h2>
        {%- if search.results_count == 0 -%}
          <p>
            {{ 'general.search.no_results_html' | t: terms: search.terms | replace: '*', '' }}
          </p>
        {%- endif -%}
      </div>

      <div class="new-grid search-grid" data-view="xsmall">
        {%- for item in search.results -%}
          {%- if item.object_type == 'product' -%}
            {%- liquid
              render 'product-grid-item', product: item

              if settings.quick_shop_enable
                render 'quick-shop-modal', product: item
              endif
            -%}
          {%- else -%}
            <div class="grid-item grid-product">
              <div class="grid-item__content">
                <a href="{{ item.url }}" class="grid-item__link">
                  {%- if item.object_type == 'article' and item.image -%}
                    <div class="grid-product__image-wrap">
                      {%- assign img_url = item.image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                      <img
                        class="grid-product__image lazyload"
                        data-src="{{ img_url }}"
                        data-widths="[180, 360, 540]"
                        data-aspectratio="{{ item.image.aspect_ratio }}"
                        data-sizes="auto"
                        alt="{{ item.title | escape }}"
                      >
                    </div>
                  {%- endif -%}
                  <div class="grid-item__meta">
                    <span class="h4">{{ item.title }}</span>
                    <div>
                      {{ item.content | strip_html | truncatewords: 45 }}
                    </div>
                  </div>
                </a>
              </div>
            </div>
          {%- endif -%}
        {%- endfor -%}
      </div>

      {%- liquid
        if paginate.pages > 1
          render 'pagination', paginate: paginate
        endif
      -%}
    {%- endif -%}
  </div>
{%- endpaginate -%}

{% schema %}
{
  "name": "Search"
}
{% endschema %}
