{% stylesheet %}
  .pagination-wrapper {
    margin-top: 4rem;
  }

  @media screen and (min-width: 990px) {
    .pagination-wrapper {
      margin-top: 5rem;
    }
  }

  .pagination__list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
  }

  .pagination__list > li {
    flex: 1 0 4.4rem;
    max-width: 4.4rem;
  }

  .pagination__list > li:not(:last-child) {
    margin-right: 1rem;
  }

  .pagination__item {
    color: rgb(var(--color-foreground));
    display: inline-flex;
    justify-content: center;
    align-items: center;
    position: relative;
    height: 4.4rem;
    width: 100%;
    padding: 0;
    text-decoration: none;
  }

  a.pagination__item:hover::after {
    height: 0.1rem;
  }

  .pagination__item .icon-caret {
    height: 0.6rem;
  }

  .pagination__item--current::after {
    height: 0.1rem;
  }

  .pagination__item--current::after,
  .pagination__item:hover::after {
    content: '';
    display: block;
    width: 2rem;
    position: absolute;
    bottom: 8px;
    left: 50%;
    transform: translateX(-50%);
    background-color: currentColor;
  }

  .pagination__item--next .icon {
    margin-left: -0.2rem;
    transform: rotate(90deg);
  }

  .pagination__item--next:hover .icon {
    transform: rotate(90deg) scale(1.07);
  }

  .pagination__item--prev .icon {
    margin-right: -0.2rem;
    transform: rotate(-90deg);
  }

  .pagination__item--prev:hover .icon {
    transform: rotate(-90deg) scale(1.07);
  }

  .pagination__item-arrow:hover::after {
    display: none;
  }

  .facets-container {
    display: grid;
    grid-template-columns: repeat(2, auto);
    grid-template-rows: repeat(2, auto);
    padding-top: 1rem;
  }

  .active-facets-mobile {
    margin-bottom: 0.5rem;
  }

  .mobile-facets__list {
    overflow-y: auto;
  }

  @media screen and (min-width: 750px) {
    .facets-container > * + * {
      margin-top: 0;
    }

    .facets__form .product-count {
      grid-column-start: 3;
      align-self: flex-start;
    }
  }

  @media screen and (max-width: 989px) {
    .facets-container {
      grid-template-columns: auto minmax(0, max-content);
      column-gap: 2rem;
    }
  }

  .facet-filters {
    align-items: flex-start;
    display: flex;
    grid-column: 2;
    grid-row: 1;
    padding-left: 2.5rem;
  }

  @media screen and (min-width: 990px) {
    .facet-filters {
      padding-left: 3rem;
    }
  }

  .facet-filters__label {
    display: block;
    color: var(--color-foreground-85);
    font-size: 1.4rem;
    margin: 0 2rem 0 0;
  }

  .facet-filters__summary {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 1.4rem;
    cursor: pointer;
    height: 4.5rem;
    padding: 0 1.5rem;
    min-width: 25rem;
    margin-top: 2.4rem;
    border: 0.1rem solid rgba(var(--color-foreground), 0.55);
  }

  .facet-filters__summary::after {
    position: static;
  }

  .facet-filters__field {
    align-items: center;
    display: flex;
    flex-grow: 1;
    justify-content: flex-end;
  }

  .facet-filters__field .select {
    width: auto;
  }

  .facet-filters__field .select:after,
  .facet-filters__field .select:before,
  .mobile-facets__sort .select:after,
  .mobile-facets__sort .select:before {
    content: none;
  }

  .facet-filters__field .select__select,
  .mobile-facets__sort .select__select {
    border-radius: 0;
    min-width: auto;
    min-height: auto;
    transition: none;
  }

  .facet-filters button {
    margin-left: 2.5rem;
  }

  .facet-filters__sort {
    background-color: transparent;
    border: 0;
    border-radius: 0;
    font-size: 1.4rem;
    height: auto;
    line-height: calc(1 + 0.5 / var(--font-body-scale));
    margin: 0;
    padding-left: 0;
    padding-right: 1.75rem;
  }

  .facet-filters__sort + .icon-caret {
    right: 0;
  }

  @media screen and (forced-colors: active) {
    .facet-filters__sort {
      border: none;
    }
  }

  .facet-filters__sort,
  .facet-filters__sort:hover {
    box-shadow: none;
    filter: none;
    transition: none;
  }

  .mobile-facets__sort .select__select:focus-visible {
    outline: 0.2rem solid rgba(var(--color-foreground), 0.5);
    outline-offset: 0.3rem;
    box-shadow: 0 0 0 0.3rem rgb(var(--color-background)), 0 0 0.5rem 0.4rem rgba(var(--color-foreground), 0.3);
  }

  .mobile-facets__sort .select__select.focused,
  .no-js .mobile-facets__sort .select__select:focus {
    outline: 0.2rem solid rgba(var(--color-foreground), 0.5);
    outline-offset: 0.3rem;
    box-shadow: 0 0 0 0.3rem rgb(var(--color-background)), 0 0 0.5rem 0.4rem rgba(var(--color-foreground), 0.3);
  }

  .facet-filters__sort:focus-visible {
    outline: 0.2rem solid rgba(var(--color-foreground), 0.5);
    outline-offset: 1rem;
    box-shadow: 0 0 0 1rem rgb(var(--color-background)), 0 0 0.2rem 1.2rem rgba(var(--color-foreground), 0.3);
  }

  .facet-filters__sort.focused,
  .no-js .facet-filters__sort:focus {
    outline: 0.2rem solid rgba(var(--color-foreground), 0.5);
    outline-offset: 1rem;
    box-shadow: 0 0 0 1rem rgb(var(--color-background)), 0 0 0.2rem 1.2rem rgba(var(--color-foreground), 0.3);
  }

  .no-js .facet-filters__sort:focus:not(:focus-visible),
  .no-js .mobile-facets__sort .select__select:focus:not(:focus-visible) {
    outline: 0;
    box-shadow: none;
  }

  .facets {
    display: block;
    grid-column-start: span 2;
  }

  .facets__form {
    display: grid;
    gap: 0 3.5rem;
    grid-template-columns: 1fr max-content max-content;
    margin-bottom: 0.5rem;
  }

  .facets__wrapper {
    align-items: center;
    align-self: flex-start;
    grid-column: 1;
    grid-row: 1;
    display: flex;
    flex-wrap: wrap;
  }

  .facets__heading {
    display: block;
    color: rgba(var(--color-foreground), 0.85);
    font-size: 1.4rem;
    margin: -1.5rem 2rem 0 0;
  }

  .facets__reset {
    margin-left: auto;
  }

  .facets__disclosure {
    margin-right: 3.5rem;
  }

  .facets__summary {
    color: rgba(var(--color-foreground), 0.75);
    font-size: 1.4rem;
    padding: 0 1.75rem 0 0;
    margin-bottom: 1.5rem;
  }

  .facets__disclosure fieldset {
    padding: 0;
    margin: 0;
    border: 0;
  }

  .facets__disclosure[open] .facets__summary,
  .facets__summary:hover {
    color: rgb(var(--color-foreground));
  }

  .facets__disclosure[open] .facets__display,
  .facets__disclosure-vertical[open] .facets__display-vertical {
    animation: animateMenuOpen var(--duration-default) ease;
  }

  .facets__summary span {
    transition: text-decoration var(--duration-short) ease;
  }

  .facets__summary:hover span {
    text-decoration: underline;
    text-underline-offset: 0.3rem;
  }

  .disclosure-has-popup[open] > .facets__summary::before {
    z-index: 2;
  }

  .facets__summary > span {
    line-height: calc(1 + 0.3 / var(--font-body-scale));
  }

  .facets__summary .icon-caret {
    right: 0;
  }

  .facets__display {
    border-width: var(--popup-border-width);
    border-style: solid;
    border-color: rgba(var(--color-foreground), var(--popup-border-opacity));
    border-radius: var(--popup-corner-radius);
    box-shadow: var(--popup-shadow-horizontal-offset) var(--popup-shadow-vertical-offset)
      var(--popup-shadow-blur-radius) rgba(var(--color-shadow), var(--popup-shadow-opacity));
    background-color: rgb(var(--color-background));
    position: absolute;
    top: calc(100% + 0.5rem);
    left: -1.2rem;
    width: 35rem;
    max-height: 55rem;
    overflow-y: auto;
  }

  .facets__header {
    border-bottom: 1px solid rgba(var(--color-foreground), 0.2);
    padding: 1.5rem 2rem;
    display: flex;
    justify-content: space-between;
    font-size: 1.4rem;
    position: sticky;
    top: 0;
    background-color: rgb(var(--color-background));
    z-index: 1;
  }

  .facets__list {
    padding: 0.5rem 2rem;
  }

  .facets__item {
    display: flex;
    align-items: center;
  }

  .facets__item label,
  .facets__item input[type='checkbox'] {
    cursor: pointer;
  }

  .facet-checkbox {
    padding: 1rem 2rem 1rem 0;
    flex-grow: 1;
    position: relative;
    font-size: 1.4rem;
    display: flex;
    word-break: break-word;
  }

  .facet-checkbox input[type='checkbox'] {
    position: absolute;
    opacity: 1;
    width: 1.6rem;
    height: 1.6rem;
    top: 0.7rem;
    left: -0.4rem;
    z-index: -1;
    appearance: none;
    -webkit-appearance: none;
  }

  .no-js .facet-checkbox input[type='checkbox'] {
    z-index: 0;
  }

  .facet-checkbox > svg {
    background-color: rgb(var(--color-background));
    margin-right: 1.2rem;
    flex-shrink: 0;
  }

  .facet-checkbox .icon-checkmark {
    visibility: hidden;
    position: absolute;
    left: 0.3rem;
    z-index: 5;
    top: 1.4rem;
  }

  .facet-checkbox > input[type='checkbox']:checked ~ .icon-checkmark {
    visibility: visible;
  }

  @media screen and (forced-colors: active) {
    .facet-checkbox > svg {
      background-color: inherit;
      border: 0.1rem solid rgb(var(--color-background));
    }

    .facet-checkbox > input[type='checkbox']:checked ~ .icon-checkmark {
      border: none;
    }
  }

  .facet-checkbox--disabled {
    color: rgba(var(--color-foreground), 0.4);
  }

  .facets__price {
    display: flex;
    padding: 2rem;
  }

  .facets__price .field + .field-currency {
    margin-left: 2rem;
  }

  .facets__price .field {
    align-items: center;
  }

  .facets__price .field-currency {
    align-self: center;
    margin-right: 0.6rem;
  }

  .facets__price .field__label {
    left: 1.5rem;
  }

  button.facets__button {
    min-height: 0;
    margin: 0 0 0 0.5rem;
    box-shadow: none;
    padding-top: 1.4rem;
    padding-bottom: 1.4rem;
  }

  .facets__button-no-js {
    transform: translateY(-0.6rem);
  }

  .active-facets {
    display: flex;
    flex-wrap: wrap;
    width: 100%;
    grid-column: 1 / -1;
    grid-row: 2;
    margin-top: -0.5rem;
  }

  .active-facets__button {
    display: block;
    margin-right: 1.5rem;
    margin-top: 1.5rem;
    padding-left: 0.2rem;
    padding-right: 0.2rem;
    text-decoration: none;
  }

  span.active-facets__button-inner {
    color: rgb(var(--color-foreground));
    box-shadow: 0 0 0 0.1rem rgb(var(--color-foreground));
    border-radius: 2.6rem;
    font-size: 1rem;
    min-height: 0;
    min-width: 0;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: stretch;
  }

  span.active-facets__button-inner:before,
  span.active-facets__button-inner:after {
    display: none;
  }

  .active-facets__button-wrapper {
    align-items: center;
    display: flex;
    justify-content: center;
    padding-top: 1.5rem;
  }

  .active-facets__button-wrapper * {
    font-size: 1rem;
  }

  @media screen and (min-width: 990px) {
    .active-facets__button {
      margin-right: 1.5rem;
    }

    .active-facets__button-wrapper *,
    span.active-facets__button-inner {
      font-size: 1.4rem;
    }
  }

  @media screen and (max-width: 989px) {
    .active-facets {
      margin: 0 -1.2rem -1.2rem;
    }

    .active-facets__button,
    .active-facets__button-remove {
      margin: 0;
      padding: 1.2rem;
    }

    span.active-facets__button-inner {
      padding-bottom: 0.3rem;
      padding-top: 0.3rem;
    }

    .active-facets__button-wrapper {
      padding-top: 0;
      margin-left: 1.2rem;
    }
  }

  .active-facets__button:hover .active-facets__button-inner {
    box-shadow: 0 0 0 0.2rem rgb(var(--color-foreground));
  }

  .active-facets__button--light .active-facets__button-inner {
    box-shadow: 0 0 0 0.1rem rgba(var(--color-foreground), 0.2);
  }

  .active-facets__button--light:hover .active-facets__button-inner {
    box-shadow: 0 0 0 0.2rem rgba(var(--color-foreground), 0.4);
  }

  a.active-facets__button:focus-visible {
    outline: none;
    box-shadow: none;
  }

  /* outline styling for Windows High Contrast Mode */
  @media (forced-colors: active) {
    a.active-facets__button:focus-visible {
      outline: transparent solid 1px;
    }
  }
  a.active-facets__button.focused,
  .no-js a.active-facets__button:focus {
    outline: none;
    box-shadow: none;
  }

  a.active-facets__button:focus-visible .active-facets__button-inner {
    box-shadow: 0 0 0 0.1rem rgba(var(--color-foreground), 0.2), 0 0 0 0.2rem rgb(var(--color-background)),
      0 0 0 0.4rem rgb(var(--color-foreground));
    outline: none;
  }

  a.active-facets__button.focused .active-facets__button-inner,
  .no-js a.active-facets__button:focus .active-facets__button-inner {
    box-shadow: 0 0 0 0.1rem rgba(var(--color-foreground), 0.2), 0 0 0 0.2rem rgb(var(--color-background)),
      0 0 0 0.4rem rgb(var(--color-foreground));
    outline: none;
  }

  .active-facets__button svg {
    align-self: center;
    flex-shrink: 0;
    margin-left: 0.6rem;
    margin-right: -0.2rem;
    pointer-events: none;
    width: 1.2rem;
  }

  @media all and (min-width: 990px) {
    .active-facets__button svg {
      margin-right: -0.4rem;
      margin-top: 0.1rem;
      width: 1.4rem;
    }
  }

  .active-facets facet-remove:only-child {
    display: none;
  }

  .facets-vertical .active-facets .active-facets-vertical-filter:only-child > facet-remove {
    display: none;
  }

  .facets-vertical .active-facets-vertical-filter {
    display: flex;
    width: 100%;
    justify-content: space-between;
  }

  .facets-vertical .active-facets-vertical-filter .active-facets__button-wrapper {
    padding-top: 0;
    display: flex;
    align-items: flex-start;
  }

  .facets-vertical .active-facets__button {
    margin-top: 0;
  }

  .active-facets__button.disabled,
  .mobile-facets__clear.disabled {
    pointer-events: none;
  }

  .mobile-facets__clear-wrapper {
    align-items: center;
    display: flex;
    justify-content: center;
  }

  .mobile-facets {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 100;
    background-color: rgba(var(--color-foreground), 0.5);
    pointer-events: none;
  }

  .mobile-facets__disclosure {
    display: flex;
  }

  .mobile-facets__wrapper {
    margin-left: 0;
    display: flex;
  }

  .mobile-facets__wrapper .disclosure-has-popup[open] > summary::before {
    height: 100vh;
    z-index: 3;
  }

  .mobile-facets__inner {
    background-color: rgb(var(--color-background));
    width: calc(100% - 5rem);
    margin-left: auto;
    height: 100%;
    overflow-y: auto;
    pointer-events: all;
    transition: transform var(--duration-short) ease;
    max-width: 37.5rem;
    display: flex;
    flex-direction: column;
    border-color: rgba(var(--color-foreground), var(--drawer-border-opacity));
    border-style: solid;
    border-width: 0 0 0 var(--drawer-border-width);
    filter: drop-shadow(
      var(--drawer-shadow-horizontal-offset) var(--drawer-shadow-vertical-offset) var(--drawer-shadow-blur-radius)
        rgba(var(--color-shadow), var(--drawer-shadow-opacity))
    );
  }

  .menu-opening .mobile-facets__inner {
    transform: translateX(0);
  }

  .js .disclosure-has-popup:not(.menu-opening) .mobile-facets__inner {
    transform: translateX(105vw);
  }

  .mobile-facets__header {
    border-bottom: 0.1rem solid rgba(var(--color-foreground), 0.08);
    padding: 1rem 2.5rem;
    text-align: center;
    display: flex;
    position: sticky;
    top: 0;
    z-index: 2;
  }

  .mobile-facets__header-inner {
    flex-grow: 1;
    position: relative;
  }

  .mobile-facets__info {
    padding: 0 2.6rem;
  }

  .mobile-facets__heading {
    font-size: calc(var(--font-heading-scale) * 1.4rem);
    margin: 0;
  }

  .mobile-facets__count {
    color: rgba(var(--color-foreground), 0.7);
    font-size: 1.3rem;
    margin: 0;
    flex-grow: 1;
  }

  .mobile-facets__open-wrapper {
    display: inline-block;
  }

  .mobile-facets__open {
    text-align: left;
    width: 100%;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    display: flex;
    align-items: center;
    color: rgba(var(--color-link), var(--alpha-link));
  }

  .mobile-facets__open:hover {
    color: rgb(var(--color-link));
  }

  .mobile-facets__open:hover line,
  .mobile-facets__open:hover circle {
    stroke: rgb(var(--color-link));
  }

  .mobile-facets__open-label {
    transition: text-decoration var(--duration-short) ease;
  }

  .mobile-facets__open:hover .mobile-facets__open-label {
    text-decoration: underline;
    text-underline-offset: 0.3rem;
  }

  .mobile-facets__open > * + * {
    margin-left: 1rem;
  }

  .mobile-facets__open svg {
    width: 2rem;
  }

  .mobile-facets__open line,
  .mobile-facets__open circle {
    stroke: rgba(var(--color-link), var(--alpha-link));
  }

  .mobile-facets__close {
    display: none;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0.7rem;
    right: 1rem;
    width: 4.4rem;
    height: 4.4rem;
    z-index: 101;
    opacity: 0;
    transition: opacity var(--duration-short) ease;
  }

  .mobile-facets__close svg {
    width: 2.2rem;
  }

  details.menu-opening .mobile-facets__close {
    display: flex;
    opacity: 1;
  }

  details.menu-opening .mobile-facets__close svg {
    margin: 0;
  }

  .mobile-facets__close-button {
    align-items: center;
    background-color: transparent;
    display: flex;
    font-size: 1.4rem;
    font: inherit;
    letter-spacing: inherit;
    margin-top: 1.5rem;
    padding: 1.2rem 2.6rem;
    text-decoration: none;
    width: calc(100% - 5.2rem);
  }

  .no-js .mobile-facets__close-button {
    display: none;
  }

  .mobile-facets__close-button .icon-arrow {
    transform: rotate(180deg);
    margin-right: 1rem;
  }

  .mobile-facets__main {
    padding: 2.7rem 0 0;
    position: relative;
    z-index: 1;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
  }

  .mobile-facets__details[open] .icon-caret {
    transform: rotate(180deg);
  }

  .no-js .mobile-facets__details {
    border-bottom: 1px solid rgba(var(--color-foreground), 0.04);
  }

  .mobile-facets__highlight {
    opacity: 0;
    visibility: hidden;
  }

  .mobile-facets__checkbox:checked + .mobile-facets__highlight {
    visibility: visible;
    opacity: 1;
    position: absolute;
    top: 0px;
    left: 0px;
    right: 0px;
    bottom: 0px;
    display: block;
    background-color: rgba(var(--color-foreground), 0.04);
  }

  .mobile-facets__summary {
    padding: 1.3rem 2.5rem;
  }

  .mobile-facets__summary svg {
    margin-left: auto;
  }

  .mobile-facets__summary > div,
  .facets__summary > div {
    display: flex;
    align-items: center;
  }

  .js .mobile-facets__submenu {
    position: absolute;
    top: 0;
    width: 100%;
    bottom: 0;
    left: 0;
    z-index: 3;
    transform: translateX(100%);
    visibility: hidden;
    display: flex;
    flex-direction: column;
  }

  .js details[open] > .mobile-facets__submenu {
    transition: transform 0.4s cubic-bezier(0.29, 0.63, 0.44, 1), visibility 0.4s cubic-bezier(0.29, 0.63, 0.44, 1);
  }

  .js details[open].menu-opening > .mobile-facets__submenu {
    transform: translateX(0);
    visibility: visible;
  }

  .js .menu-drawer__submenu .mobile-facets__submenu {
    overflow-y: auto;
  }

  .js .mobile-facets .submenu-open {
    visibility: hidden; /* hide menus from screen readers when hidden by submenu */
  }

  .mobile-facets__item {
    position: relative;
  }

  input.mobile-facets__checkbox {
    border: 0;
    position: absolute;
    width: 1.6rem;
    height: 1.6rem;
    position: absolute;
    left: 2.1rem;
    top: 1.2rem;
    z-index: 0;
    appearance: none;
    -webkit-appearance: none;
  }

  .mobile-facets__label {
    padding: 1.5rem 2rem 1.5rem 2.5rem;
    width: 100%;
    transition: background-color 0.2s ease;
    word-break: break-word;
    display: flex;
  }

  .mobile-facets__label > svg {
    background-color: rgb(var(--color-background));
    position: relative;
    z-index: 2;
    margin-right: 1.2rem;
    flex-shrink: 0;
  }

  .mobile-facets__label .icon-checkmark {
    position: absolute;
    top: 1.9rem;
    left: 2.8rem;
    visibility: hidden;
  }

  .mobile-facets__label > input[type='checkbox']:checked ~ .icon-checkmark {
    visibility: visible;
  }

  .mobile-facets__arrow,
  .mobile-facets__summary .icon-caret {
    margin-left: auto;
    display: block;
  }

  .mobile-facets__label--disabled {
    opacity: 0.5;
  }

  .mobile-facets__footer {
    border-top: 0.1rem solid rgba(var(--color-foreground), 0.08);
    padding: 2rem;
    bottom: 0;
    position: sticky;
    display: flex;
    z-index: 2;
    margin-top: auto;
    background-color: rgb(var(--color-background));
    background: var(--gradient-background);
  }

  .mobile-facets__footer > * + * {
    margin-left: 1rem;
  }

  .mobile-facets__footer > * {
    width: 50%;
  }

  .mobile-facets__footer noscript .button {
    width: 100%;
  }

  .mobile-facets__sort {
    display: flex;
    justify-content: space-between;
  }

  .mobile-facets__sort label {
    flex-shrink: 0;
  }

  .mobile-facets__sort .select {
    width: auto;
  }

  .no-js .mobile-facets__sort .select {
    position: relative;
    right: -1rem;
  }

  .mobile-facets__sort .select .icon-caret {
    right: 0;
  }

  .mobile-facets__sort .select__select {
    background-color: transparent;
    border-radius: 0;
    box-shadow: none;
    filter: none;
    margin-left: 0.5rem;
    margin-right: 0.5rem;
    padding-left: 0.5rem;
    padding-right: 1.5rem;
  }

  .product-count {
    align-self: center;
    position: relative;
    text-align: right;
  }

  .product-count__text {
    font-size: 1.4rem;
    line-height: calc(1 + 0.5 / var(--font-body-scale));
    margin: 0;
  }

  .product-count__text.loading {
    visibility: hidden;
  }

  .product-count .loading-overlay__spinner,
  .product-count-vertical .loading-overlay__spinner {
    display: none;
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 1.8rem;
  }

  .product-count__text.loading + .loading-overlay__spinner {
    display: block;
  }

  @media screen and (min-width: 750px) {
    .facets-vertical {
      display: flex;
    }

    .facets-wrap-vertical {
      border: none;
      padding-left: 0;
    }

    .facets__form-vertical {
      display: flex;
      flex-direction: column;
      width: 26rem;
    }

    .facets__disclosure-vertical {
      border-top: 0.1rem solid rgba(var(--color-foreground), 0.1);
      margin-right: 0;
    }

    .facets-vertical .facets__summary {
      padding-top: 1.5rem;
      margin-bottom: 0;
      padding-bottom: 1.5rem;
    }

    .facets__heading--vertical {
      margin: 0 0 1.5rem 0;
      font-size: 1.5rem;
    }

    .facets__header-vertical {
      padding: 1.5rem 2rem 1.5rem 0;
      font-size: 1.4rem;
    }

    .facets__display-vertical {
      padding-bottom: 1.5rem;
    }

    .facets-vertical .facets-wrapper {
      padding-right: 3rem;
    }

    .facets-vertical .facets-wrapper--no-filters {
      display: none;
    }

    .no-js .facets-vertical .facets-wrapper--no-filters {
      display: block;
    }

    .facets-vertical .product-grid-container {
      width: 100%;
    }

    .facets-vertical-form {
      display: flex;
      justify-content: flex-end;
    }

    .product-count-vertical {
      margin-left: 3.5rem;
    }

    .facets-vertical .active-facets__button-wrapper {
      margin-bottom: 2rem;
    }

    .facets-vertical .no-js .facets__button-no-js {
      transform: none;
      margin-left: 0;
    }

    .facets-vertical .no-js .facet-filters__field {
      justify-content: flex-start;
      padding-bottom: 1rem;
      padding-top: 2rem;
    }

    .facets-vertical .facets__price {
      padding: 0.5rem 0.5rem 0.5rem 0;
    }

    .facets-vertical .facets__price .field:last-of-type {
      margin-left: 1rem;
    }

    .facets-vertical .active-facets__button {
      margin-bottom: 1.5rem;
    }

    .no-js .facets-vertical .facet-filters.sorting {
      padding-left: 0;
      flex-direction: column;
    }

    .facets-vertical .facet-checkbox input[type='checkbox'] {
      z-index: 0;
    }

    .no-js .facets-vertical .facets-container {
      display: flex;
      flex-direction: column;
    }

    .facets-vertical .active-facets facet-remove:last-of-type {
      margin-bottom: 1rem;
    }

    .facets-vertical .active-facets {
      margin: 0;
      align-items: flex-start;
    }

    .facets__disclosure-vertical[open] .facets__summary .icon-caret {
      transform: rotate(180deg);
    }

    .facets-container-drawer {
      display: flex;
      flex-flow: row wrap;
      align-items: center;
      column-gap: 0;
    }

    .facets-container-drawer .mobile-facets__wrapper {
      margin-right: 2rem;
      flex-grow: 1;
    }

    .facets-container-drawer .product-count {
      margin: 0 0 0.5rem 3.5rem;
    }

    .facets-container-drawer .facets-pill {
      width: 100%;
    }

    .facets-container-drawer .facets__form {
      display: block;
    }
  }

  @media screen and (min-width: 750px) and (max-width: 989px) {
    .facets-vertical .active-facets__button {
      padding: 1rem;
      margin-bottom: 0;
      margin-left: -0.5rem;
    }

    .facets-vertical .active-facets__button-remove {
      padding: 0 1rem 1rem;
    }
  }

  @media screen and (max-width: 749px) {
    .collection .grid__item:only-child {
      flex: 0 0 100%;
      max-width: 100%;
    }
  }

  @media screen and (max-width: 989px) {
    .collection .slider.slider--tablet {
      margin-bottom: 1.5rem;
    }
  }

  .collection .loading-overlay {
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    display: none;
    width: 100%;
    padding: 0 1.5rem;
    opacity: 0.7;
  }

  @media screen and (min-width: 750px) {
    .collection .loading-overlay {
      padding-left: 5rem;
      padding-right: 5rem;
    }
  }

  .collection.loading .loading-overlay {
    display: block;
  }

  .collection--empty .title-wrapper {
    margin-top: 10rem;
    margin-bottom: 15rem;
  }

  @media screen and (max-width: 989px) {
    .collection .slider--tablet.product-grid {
      scroll-padding-left: 1.5rem;
    }
  }

  .collection__description > * {
    margin: 0;
  }

  .collection__title.title-wrapper {
    margin-bottom: 2.5rem;
  }

  .collection__title .title:not(:only-child) {
    margin-bottom: 1rem;
  }

  @media screen and (min-width: 990px) {
    .collection__title--desktop-slider .title {
      margin-bottom: 2.5rem;
    }

    .collection__title.title-wrapper--self-padded-tablet-down {
      padding: 0 5rem;
    }

    .collection slider-component:not(.page-width-desktop) {
      padding: 0;
    }

    .collection--full-width slider-component:not(.slider-component-desktop) {
      padding: 0 1.5rem;
      max-width: none;
    }
  }

  .collection__view-all a:not(.link) {
    margin-top: 1rem;
  }

  .loading-overlay {
    position: absolute;
    z-index: 1;
    width: 1.8rem;
  }

  @media screen and (max-width: 749px) {
    .loading-overlay {
      top: 0;
      right: 0;
    }
  }

  @media screen and (min-width: 750px) {
    .loading-overlay {
      left: 0;
    }
  }

  .loading-overlay__spinner {
    width: 1.8rem;
    display: inline-block;
  }

  .spinner {
    animation: rotator 1.4s linear infinite;
  }

  @keyframes rotator {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(270deg);
    }
  }

  .path {
    stroke-dasharray: 280;
    stroke-dashoffset: 0;
    transform-origin: center;
    stroke: rgb(var(--color-foreground));
    animation: dash 1.4s ease-in-out infinite;
  }

  @media screen and (forced-colors: active) {
    .path {
      stroke: CanvasText;
    }
  }

  @keyframes dash {
    0% {
      stroke-dashoffset: 280;
    }
    50% {
      stroke-dashoffset: 75;
      transform: rotate(135deg);
    }
    100% {
      stroke-dashoffset: 280;
      transform: rotate(450deg);
    }
  }

  .loading-overlay:not(.hidden) + .cart-item__price-wrapper,
  .loading-overlay:not(.hidden) ~ cart-remove-button {
    opacity: 50%;
  }

  .loading-overlay:not(.hidden) ~ cart-remove-button {
    pointer-events: none;
    cursor: default;
  }
{% endstylesheet %}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<div class="section-{{ section.id }}-padding">
  {% comment %} Sort is the first tabbable element when filter type is vertical {% endcomment %}
  {%- if section.settings.enable_sorting and section.settings.filter_type == 'vertical' -%}
    <facet-filters-form class="facets facets-vertical-sort page-width small-hide no-js-hidden">
      <form class="facets-vertical-form" id="FacetSortForm">
        <div class="facet-filters sorting caption">
          <div class="facet-filters__field">
            <h2 class="facet-filters__label caption-large text-body">
              <label for="SortBy">'products.facets.sort_by_label' | t </label>
            </h2>
            <div class="select">
              {%- assign sort_by = collection.sort_by | default: collection.default_sort_by -%}
              <select
                name="sort_by"
                class="facet-filters__sort select__select caption-large"
                id="SortBy"
                aria-describedby="a11y-refresh-page-message"
              >
                {%- for option in collection.sort_options -%}
                  <option
                    value="{{ option.value | escape }}"
                    {% if option.value == sort_by %}
                      selected="selected"
                    {% endif %}
                  >
                    {{ option.name | escape }}
                  </option>
                {%- endfor -%}
              </select>
              <svg aria-hidden="true" focusable="false" class="icon icon-caret" viewBox="0 0 10 6">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
              </svg>
            </div>
          </div>
          <noscript>
            <button type="submit" class="facets__button-no-js button button--secondary">
              'products.facets.sort_button' | t 
            </button>
          </noscript>
        </div>

        <div class="product-count-vertical light" role="status">
          <h2 class="product-count__text text-body">
            <span id="ProductCountDesktop">
              {%- if collection.results_count -%}
               'templates.search.results_with_count'  | t: terms: collection.terms, count: collection.results_count
                
              {%- elsif collection.products_count == collection.all_products_count -%}
                'products.facets.product_count_simple' | t: count: collection.products_count 
              {%- else -%}
                'products.facets.product_count'
                  | t: product_count: collection.products_count, count: collection.all_products_count
              {%- endif -%}
            </span>
          </h2>
          <div class="loading-overlay__spinner">
            <svg
              aria-hidden="true"
              focusable="false"
              class="spinner"
              viewBox="0 0 66 66"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
            </svg>
          </div>
        </div>
      </form>
    </facet-filters-form>
  {%- endif -%}

  <div class="{% if section.settings.filter_type == 'vertical' %} facets-vertical page-width{% endif %}">
    <script>
      class FacetFiltersForm extends HTMLElement {
        constructor() {
          super();
          this.onActiveFilterClick = this.onActiveFilterClick.bind(this);

          this.debouncedOnSubmit = debounce((event) => {
            this.onSubmitHandler(event);
          }, 500);

          const facetForm = this.querySelector('form');
          facetForm.addEventListener('input', this.debouncedOnSubmit.bind(this));

          const facetWrapper = this.querySelector('#FacetsWrapperDesktop');
          if (facetWrapper) facetWrapper.addEventListener('keyup', onKeyUpEscape);
        }

        static setListeners() {
          const onHistoryChange = (event) => {
            const searchParams = event.state ? event.state.searchParams : FacetFiltersForm.searchParamsInitial;
            if (searchParams === FacetFiltersForm.searchParamsPrev) return;
            FacetFiltersForm.renderPage(searchParams, null, false);
          };
          window.addEventListener('popstate', onHistoryChange);
        }

        static toggleActiveFacets(disable = true) {
          document.querySelectorAll('.js-facet-remove').forEach((element) => {
            element.classList.toggle('disabled', disable);
          });
        }

        static renderPage(searchParams, event, updateURLHash = true) {
          FacetFiltersForm.searchParamsPrev = searchParams;
          const sections = FacetFiltersForm.getSections();
          const countContainer = document.getElementById('ProductCount');
          const countContainerDesktop = document.getElementById('ProductCountDesktop');
          document.getElementById('ProductGridContainer').querySelector('.collection').classList.add('loading');
          if (countContainer) {
            countContainer.classList.add('loading');
          }
          if (countContainerDesktop) {
            countContainerDesktop.classList.add('loading');
          }

          sections.forEach((section) => {
            const url = `${window.location.pathname}?section_id=${section.section}&${searchParams}`;
            const filterDataUrl = (element) => element.url === url;

            FacetFiltersForm.filterData.some(filterDataUrl)
              ? FacetFiltersForm.renderSectionFromCache(filterDataUrl, event)
              : FacetFiltersForm.renderSectionFromFetch(url, event);
          });

          if (updateURLHash) FacetFiltersForm.updateURLHash(searchParams);
        }

        static renderSectionFromFetch(url, event) {
          fetch(url)
            .then((response) => response.text())
            .then((responseText) => {
              const html = responseText;
              FacetFiltersForm.filterData = [...FacetFiltersForm.filterData, { html, url }];
              FacetFiltersForm.renderFilters(html, event);
              FacetFiltersForm.renderProductGridContainer(html);
              FacetFiltersForm.renderProductCount(html);
            });
        }

        static renderSectionFromCache(filterDataUrl, event) {
          const html = FacetFiltersForm.filterData.find(filterDataUrl).html;
          FacetFiltersForm.renderFilters(html, event);
          FacetFiltersForm.renderProductGridContainer(html);
          FacetFiltersForm.renderProductCount(html);
        }

        static renderProductGridContainer(html) {
          document.getElementById('ProductGridContainer').innerHTML = new DOMParser()
            .parseFromString(html, 'text/html')
            .getElementById('ProductGridContainer').innerHTML;
        }

        static renderProductCount(html) {
          const count = new DOMParser().parseFromString(html, 'text/html').getElementById('ProductCount').innerHTML;
          const container = document.getElementById('ProductCount');
          const containerDesktop = document.getElementById('ProductCountDesktop');
          container.innerHTML = count;
          container.classList.remove('loading');
          if (containerDesktop) {
            containerDesktop.innerHTML = count;
            containerDesktop.classList.remove('loading');
          }
        }

        static renderFilters(html, event) {
          const parsedHTML = new DOMParser().parseFromString(html, 'text/html');

          const facetDetailsElements = parsedHTML.querySelectorAll(
            '#FacetFiltersForm .js-filter, #FacetFiltersFormMobile .js-filter, #FacetFiltersPillsForm .js-filter'
          );
          const matchesIndex = (element) => {
            const jsFilter = event ? event.target.closest('.js-filter') : undefined;
            return jsFilter ? element.dataset.index === jsFilter.dataset.index : false;
          };
          const facetsToRender = Array.from(facetDetailsElements).filter((element) => !matchesIndex(element));
          const countsToRender = Array.from(facetDetailsElements).find(matchesIndex);

          facetsToRender.forEach((element) => {
            document.querySelector(`.js-filter[data-index="${element.dataset.index}"]`).innerHTML = element.innerHTML;
          });

          FacetFiltersForm.renderActiveFacets(parsedHTML);
          FacetFiltersForm.renderAdditionalElements(parsedHTML);

          if (countsToRender) FacetFiltersForm.renderCounts(countsToRender, event.target.closest('.js-filter'));
        }

        static renderActiveFacets(html) {
          const activeFacetElementSelectors = ['.active-facets-mobile', '.active-facets-desktop'];

          activeFacetElementSelectors.forEach((selector) => {
            const activeFacetsElement = html.querySelector(selector);
            if (!activeFacetsElement) return;
            document.querySelector(selector).innerHTML = activeFacetsElement.innerHTML;
          });

          FacetFiltersForm.toggleActiveFacets(false);
        }

        static renderAdditionalElements(html) {
          const mobileElementSelectors = ['.mobile-facets__open', '.mobile-facets__count', '.sorting'];

          mobileElementSelectors.forEach((selector) => {
            if (!html.querySelector(selector)) return;
            document.querySelector(selector).innerHTML = html.querySelector(selector).innerHTML;
          });

          document.getElementById('FacetFiltersFormMobile').closest('menu-drawer').bindEvents();
        }

        static renderCounts(source, target) {
          const targetElement = target.querySelector('.facets__selected');
          const sourceElement = source.querySelector('.facets__selected');

          const targetElementAccessibility = target.querySelector('.facets__summary');
          const sourceElementAccessibility = source.querySelector('.facets__summary');

          if (sourceElement && targetElement) {
            target.querySelector('.facets__selected').outerHTML = source.querySelector('.facets__selected').outerHTML;
          }

          if (targetElementAccessibility && sourceElementAccessibility) {
            target.querySelector('.facets__summary').outerHTML = source.querySelector('.facets__summary').outerHTML;
          }
        }

        static updateURLHash(searchParams) {
          history.pushState(
            { searchParams },
            '',
            `${window.location.pathname}${searchParams && '?'.concat(searchParams)}`
          );
        }

        static getSections() {
          return [
            {
              section: document.getElementById('product-grid').dataset.id,
            },
          ];
        }

        createSearchParams(form) {
          const formData = new FormData(form);
          return new URLSearchParams(formData).toString();
        }

        onSubmitForm(searchParams, event) {
          FacetFiltersForm.renderPage(searchParams, event);
        }

        onSubmitHandler(event) {
          event.preventDefault();
          const sortFilterForms = document.querySelectorAll('facet-filters-form form');
          if (event.srcElement.className == 'mobile-facets__checkbox') {
            const searchParams = this.createSearchParams(event.target.closest('form'));
            this.onSubmitForm(searchParams, event);
          } else {
            const forms = [];
            const isMobile = event.target.closest('form').id === 'FacetFiltersFormMobile';

            sortFilterForms.forEach((form) => {
              if (!isMobile) {
                if (
                  form.id === 'FacetSortForm' ||
                  form.id === 'FacetFiltersForm' ||
                  form.id === 'FacetSortDrawerForm'
                ) {
                  const noJsElements = document.querySelectorAll('.no-js-list');
                  noJsElements.forEach((el) => el.remove());
                  forms.push(this.createSearchParams(form));
                }
              } else if (form.id === 'FacetFiltersFormMobile') {
                forms.push(this.createSearchParams(form));
              }
            });
            this.onSubmitForm(forms.join('&'), event);
          }
        }

        onActiveFilterClick(event) {
          event.preventDefault();
          FacetFiltersForm.toggleActiveFacets();
          const url =
            event.currentTarget.href.indexOf('?') == -1
              ? ''
              : event.currentTarget.href.slice(event.currentTarget.href.indexOf('?') + 1);
          FacetFiltersForm.renderPage(url);
        }
      }

      FacetFiltersForm.filterData = [];
      FacetFiltersForm.searchParamsInitial = window.location.search.slice(1);
      FacetFiltersForm.searchParamsPrev = window.location.search.slice(1);
      customElements.define('facet-filters-form', FacetFiltersForm);
      FacetFiltersForm.setListeners();

      class PriceRange extends HTMLElement {
        constructor() {
          super();
          this.querySelectorAll('input').forEach((element) =>
            element.addEventListener('change', this.onRangeChange.bind(this))
          );
          this.setMinAndMaxValues();
        }

        onRangeChange(event) {
          this.adjustToValidValues(event.currentTarget);
          this.setMinAndMaxValues();
        }

        setMinAndMaxValues() {
          const inputs = this.querySelectorAll('input');
          const minInput = inputs[0];
          const maxInput = inputs[1];
          if (maxInput.value) minInput.setAttribute('max', maxInput.value);
          if (minInput.value) maxInput.setAttribute('min', minInput.value);
          if (minInput.value === '') maxInput.setAttribute('min', 0);
          if (maxInput.value === '') minInput.setAttribute('max', maxInput.getAttribute('max'));
        }

        adjustToValidValues(input) {
          const value = Number(input.value);
          const min = Number(input.getAttribute('min'));
          const max = Number(input.getAttribute('max'));

          if (value < min) input.value = min;
          if (value > max) input.value = max;
        }
      }

      customElements.define('price-range', PriceRange);

      class FacetRemove extends HTMLElement {
        constructor() {
          super();
          const facetLink = this.querySelector('a');
          facetLink.setAttribute('role', 'button');
          facetLink.addEventListener('click', this.closeFilter.bind(this));
          facetLink.addEventListener('keyup', (event) => {
            event.preventDefault();
            if (event.code.toUpperCase() === 'SPACE') this.closeFilter(event);
          });
        }

        closeFilter(event) {
          event.preventDefault();
          const form = this.closest('facet-filters-form') || document.querySelector('facet-filters-form');
          form.onActiveFilterClick(event);
        }
      }

      customElements.define('facet-remove', FacetRemove);
    </script>
    {%- if section.settings.enable_filtering or section.settings.enable_sorting -%}
      <aside
        aria-labelledby="verticalTitle"
        class="facets-wrapper{% unless section.settings.enable_filtering %} facets-wrapper--no-filters{% endunless %}{% if section.settings.filter_type != 'vertical' %} page-width{% endif %}"
        id="main-collection-filters"
        data-id="{{ section.id }}"
      >
        {%- liquid
          assign results = collection
          assign enable_filtering = section.settings.enable_filtering
          assign enable_sorting = section.settings.enable_sorting
          assign filter_type = section.settings.filter_type
          assign sort_by = results.sort_by | default: results.default_sort_by
          assign total_active_values = 0
          if results.url
            assign results_url = results.url
          else
            assign terms = results.terms | escape
            assign results_url = '?q=' | append: terms | append: '&options%5Bprefix%5D=last&sort_by=' | append: sort_by
          endif
        -%}

        <div class="facets-container{% if filter_type == 'drawer' %} facets-container-drawer{% endif %}">
          {%- if filter_type == 'vertical' or filter_type == 'horizontal' -%}
            <facet-filters-form class="facets small-hide">
              <form
                id="FacetFiltersForm"
                class="{% if filter_type == 'horizontal' %}facets__form{% else %}facets__form-vertical{% endif %}"
              >
                {%- if results.terms -%}
                  <input type="hidden" name="q" value="{{ results.terms | escape }}">
                  <input name="options[prefix]" type="hidden" value="last">
                {%- endif -%}

                {% if enable_filtering %}
                  {% comment %} Heading is the first tabbable element on filter type horizontal {% endcomment %}
                  <div
                    id="FacetsWrapperDesktop"
                    {% if filter_type == 'horizontal' %}
                      class="facets__wrapper"
                    {% endif %}
                  >
                    {%- if filter_type == 'horizontal' and results.filters != empty -%}
                      <h2 class="facets__heading caption-large text-body" id="verticalTitle" tabindex="-1">
                        'products.facets.filter_by_label' | t 
                      </h2>
                    {%- endif -%}
                    {% comment %} Pills are right below the title for filter type vertical {% endcomment %}
                    {%- if filter_type == 'vertical' -%}
                      <div class="active-facets active-facets-desktop">
                        <div class="active-facets-vertical-filter">
                          {%- unless results.filters == empty -%}
                            <h2
                              class="facets__heading facets__heading--vertical caption-large text-body"
                              id="verticalTitle"
                              tabindex="-1"
                            >
                              'products.facets.filter_by_label' | t 
                            </h2>
                          {%- endunless -%}
                          <facet-remove class="active-facets__button-wrapper">
                            <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
                              <span>'products.facets.clear_all' | t </span>
                            </a>
                          </facet-remove>
                        </div>
                        {%- for filter in results.filters -%}
                          {%- for value in filter.active_values -%}
                            <facet-remove>
                              <a
                                href="{{ value.url_to_remove }}"
                                class="active-facets__button active-facets__button--light"
                              >
                                <span class="active-facets__button-inner button button--tertiary">
                                  {{ filter.label }}: {{ value.label | escape }}
                                  <svg
                                    aria-hidden="true"
                                    focusable="false"
                                    width="12"
                                    height="13"
                                    class="icon icon-close-small"
                                    viewBox="0 0 12 13"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                  >
                                    <path d="M8.48627 9.32917L2.82849 3.67098" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M2.88539 9.38504L8.42932 3.61524" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                  </svg>

                                  <span class="visually-hidden">'products.facets.clear_filter' | t </span>
                                </span>
                              </a>
                            </facet-remove>
                          {%- endfor -%}
                          {% if filter.type == 'price_range' %}
                            {%- if filter.min_value.value != null or filter.max_value.value != null -%}
                              <facet-remove>
                                <a
                                  href="{{ filter.url_to_remove }}"
                                  class="active-facets__button active-facets__button--light"
                                >
                                  <span class="active-facets__button-inner button button--tertiary">
                                    {%- if filter.min_value.value -%}
                                      {{ filter.min_value.value | money }}
                                    {%- else -%}
                                      {{ 0 | money }}
                                    {%- endif -%}
                                    -
                                    {%- if filter.max_value.value -%}
                                      {{ filter.max_value.value | money }}
                                    {%- else -%}
                                      {{ filter.range_max | money }}
                                    {%- endif -%}
                                    <svg
                                      aria-hidden="true"
                                      focusable="false"
                                      width="12"
                                      height="13"
                                      class="icon icon-close-small"
                                      viewBox="0 0 12 13"
                                      fill="none"
                                      xmlns="http://www.w3.org/2000/svg"
                                    >
                                      <path d="M8.48627 9.32917L2.82849 3.67098" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                      <path d="M2.88539 9.38504L8.42932 3.61524" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>

                                    <span class="visually-hidden">'products.facets.clear_filter' | t </span>
                                  </span>
                                </a>
                              </facet-remove>
                            {%- endif -%}
                          {% endif %}
                        {%- endfor -%}
                      </div>
                    {%- endif -%}

                    <script src="'show-more.js' | asset_url }}" defer="defer"></script>
                    {% comment %} Filters for both horizontal and vertical filter {% endcomment %}
                    {%- for filter in results.filters -%}
                      {%- assign total_active_values = total_active_values | plus: filter.active_values.size -%}
                      {% case filter.type %}
                        {% when 'boolean', 'list' %}
                          <details
                            id="Details-{{ forloop.index }}-{{ section.id }}"
                            class="{% if filter_type == 'horizontal' %}disclosure-has-popup facets__disclosure{% else %} facets__disclosure-vertical{% endif %} js-filter"
                            data-index="{{ forloop.index }}"
                            {% if filter_type == 'vertical' and forloop.index == 1 %}
                              open
                            {% endif %}
                          >
                            <summary
                              class="facets__summary caption-large focus-offset"
                            >
                              <div>
                                <span>
                                  {{- filter.label | escape }}
                                  {%- if filter_type == 'vertical' -%}
                                    <span class="facets__selected no-js-hidden{% if filter.active_values.size == 0 %} hidden{% endif %}">
                                      ({{ filter.active_values.size }})</span
                                    >
                                  {%- endif -%}
                                </span>
                                <svg aria-hidden="true" focusable="false" class="icon icon-caret" viewBox="0 0 10 6">
                                  <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                                </svg>
                              </div>
                            </summary>
                            <div
                              id="Facet-{{ forloop.index }}-{{ section.id }}"
                              class="parent-display {% if filter_type == 'horizontal' %}facets__display{% else %}facets__display-vertical{% endif %}"
                            >
                              {%- if filter_type != 'vertical' -%}
                                <div class="facets__header">
                                  <span class="facets__selected no-js-hidden">
                                    'products.facets.filters_selected' | t: count: filter.active_values.size -
                                  </span>
                                  <facet-remove>
                                    <a href="{{ filter.url_to_remove }}" class="facets__reset link underlined-link">
                                      'products.facets.reset' | t 
                                    </a>
                                  </facet-remove>
                                </div>
                              {%- endif -%}
                              <fieldset class="facets-wrap parent-wrap {% if filter_type == 'vertical' %} facets-wrap-vertical{% endif %}">
                                <legend class="visually-hidden">{{ filter.label | escape }}</legend>
                                <ul
                                  class="{% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled no-js-hidden"
                                  role="list"
                                >
                                  {%- for value in filter.values -%}
                                    <li class="list-menu__item facets__item{% if forloop.index > 10 and filter_type == 'vertical' %} show-more-item hidden{% endif %}">
                                      <label
                                        for="Filter-{{ filter.param_name | escape }}-{{ forloop.index }}"
                                        class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                      >
                                        <input
                                          type="checkbox"
                                          name="{{ value.param_name }}"
                                          value="{{ value.value }}"
                                          id="Filter-{{ filter.param_name | escape }}-{{ forloop.index }}"
                                          {% if value.active %}
                                            checked
                                          {% endif %}
                                          {% if value.count == 0 and value.active == false %}
                                            disabled
                                          {% endif %}
                                        >

                                        <svg
                                          width="1.6rem"
                                          height="1.6rem"
                                          viewBox="0 0 16 16"
                                          aria-hidden="true"
                                          focusable="false"
                                        >
                                          <rect width="16" height="16" stroke="currentColor" fill="none" stroke-width="1"></rect>
                                        </svg>

                                        <svg
                                          aria-hidden="true"
                                          class="icon icon-checkmark"
                                          width="1.1rem"
                                          height="0.7rem"
                                          viewBox="0 0 11 7"
                                          fill="none"
                                          xmlns="http://www.w3.org/2000/svg"
                                        >
                                          <path d="M1.5 3.5L2.83333 4.75L4.16667 6L9.5 1"
                                            stroke="currentColor"
                                            stroke-width="1.75"
                                            stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        </svg>

                                        <span aria-hidden="true">{{ value.label | escape }} ({{ value.count }})</span>
                                        <span class="visually-hidden">
                                          {{- value.label | escape }} (
                                          {%- if value.count == 1 -%}
                                            'products.facets.product_count_simple.one' | t: count: value.count 
                                          {%- else -%}
                                            'products.facets.product_count_simple.other' | t: count: value.count 
                                          {%- endif -%}
                                          )</span
                                        >
                                      </label>
                                    </li>
                                  {%- endfor -%}
                                </ul>
                                {% comment %} No show more for no JS {% endcomment %}
                                <ul
                                  class="{% if filter_type != 'vertical' %} facets__list{% endif %} no-js-list list-unstyled no-js"
                                  role="list"
                                >
                                  {%- for value in filter.values -%}
                                    <li class="list-menu__item facets__item">
                                      <label
                                        for="Filter-{{ filter.param_name | escape }}-{{ forloop.index }}-no-js"
                                        class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                      >
                                        <input
                                          type="checkbox"
                                          name="{{ value.param_name }}"
                                          value="{{ value.value }}"
                                          id="Filter-{{ filter.param_name | escape }}-{{ forloop.index }}-no-js"
                                          {% if value.active %}
                                            checked
                                          {% endif %}
                                          {% if value.count == 0 and value.active == false %}
                                            disabled
                                          {% endif %}
                                        >

                                        <svg
                                          width="1.6rem"
                                          height="1.6rem"
                                          viewBox="0 0 16 16"
                                          aria-hidden="true"
                                          focusable="false"
                                        >
                                          <rect width="16" height="16" stroke="currentColor" fill="none" stroke-width="1"></rect>
                                        </svg>

                                        <svg
                                          aria-hidden="true"
                                          class="icon icon-checkmark"
                                          width="1.1rem"
                                          height="0.7rem"
                                          viewBox="0 0 11 7"
                                          fill="none"
                                          xmlns="http://www.w3.org/2000/svg"
                                        >
                                          <path d="M1.5 3.5L2.83333 4.75L4.16667 6L9.5 1"
                                            stroke="currentColor"
                                            stroke-width="1.75"
                                            stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        </svg>

                                        <span aria-hidden="true">{{ value.label | escape }} ({{ value.count }})</span>
                                        <span class="visually-hidden">
                                          {{- value.label | escape }} (
                                          {%- if value.count == 1 -%}
                                            'products.facets.product_count_simple.one' | t: count: value.count 
                                          {%- else -%}
                                            'products.facets.product_count_simple.other' | t: count: value.count 
                                          {%- endif -%}
                                          )</span
                                        >
                                      </label>
                                    </li>
                                  {%- endfor -%}
                                </ul>
                              </fieldset>
                              {%- if filter.values.size > 10 and filter_type == 'vertical' -%}
                                <show-more-button>
                                  <button
                                    class="button-show-more link underlined-link no-js-hidden"
                                    id="Show-More-{{ forloop.index }}-{{ section.id }}"
                                    type="button"
                                  >
                                    <span class="label-show-more label-text"
                                      ><span aria-hidden="true">+ </span>'products.facets.show_more' | t -}}
                                    </span>
                                    <span class="label-show-less label-text hidden"
                                      ><span aria-hidden="true">- </span>'products.facets.show_less' | t -}}
                                    </span>
                                  </button>
                                </show-more-button>
                              {%- endif %}
                            </div>
                          </details>
                        {% when 'price_range' %}
                          {% liquid
                            assign currencies_using_comma_decimals = 'ANG,ARS,BRL,BYN,BYR,CLF,CLP,COP,CRC,CZK,DKK,EUR,HRK,HUF,IDR,ISK,MZN,NOK,PLN,RON,RUB,SEK,TRY,UYU,VES,VND' | split: ','
                            assign uses_comma_decimals = false
                            if currencies_using_comma_decimals contains cart.currency.iso_code
                              assign uses_comma_decimals = true
                            endif
                          %}
                          <details
                            id="Details-{{ forloop.index }}-{{ section.id }}"
                            class="{% if filter_type == 'horizontal' %}disclosure-has-popup facets__disclosure{% else %} facets__disclosure-vertical{% endif %} js-filter"
                            data-index="{{ forloop.index }}"
                            {% if filter_type == 'vertical' and forloop.index == 1 %}
                              open
                            {% endif %}
                          >
                            <summary class="facets__summary caption-large focus-offset">
                              <div>
                                <span>{{ filter.label | escape }}</span>
                                <svg aria-hidden="true" focusable="false" class="icon icon-caret" viewBox="0 0 10 6">
                                  <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                                </svg>
                              </div>
                            </summary>
                            <div
                              id="Facet-{{ forloop.index }}-{{ section.id }}"
                              class="{% if filter_type == 'horizontal' %}facets__display{% else %}facets__display-vertical{% endif %}"
                            >
                              <div class="{% if filter_type == 'horizontal' %}facets__header{% else %}facets__header-vertical{% endif %}">
                                {%- assign max_price_amount = filter.range_max | money | strip_html | escape -%}
                                <span class="facets__selected">
                                  'products.facets.max_price' | t: price: max_price_amount 
                                </span>
                                {%- if filter_type != 'vertical' -%}
                                  <facet-remove>
                                    <a href="{{ filter.url_to_remove }}" class="facets__reset link underlined-link">
                                      'products.facets.reset' | t 
                                    </a>
                                  </facet-remove>
                                {%- endif -%}
                              </div>
                              <price-range class="facets__price">
                                <span class="field-currency">{{ cart.currency.symbol }}</span>
                                <div class="field">
                                  <input
                                    class="field__input"
                                    name="{{ filter.min_value.param_name }}"
                                    id="Filter-{{ filter.label | escape }}-GTE"
                                    {%- if filter.min_value.value -%}
                                      {%- if uses_comma_decimals -%}
                                        value="{{ filter.min_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                      {%- else -%}
                                        value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"
                                      {%- endif %}
                                    {%- endif -%}
                                    type="number"
                                    placeholder="0"
                                    min="0"
                                    {%- if uses_comma_decimals -%}
                                      max="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                    {%- else -%}
                                      max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                                    {% endif %}
                                  >
                                  <label class="field__label" for="Filter-{{ filter.label | escape }}-GTE">
                                    'products.facets.from' | t -}}
                                  </label>
                                </div>
                                {%- if filter_type != 'vertical' -%}
                                  <span class="field-currency">{{ cart.currency.symbol }}</span>
                                {%- endif -%}
                                <div class="field">
                                  <input
                                    class="field__input"
                                    name="{{ filter.max_value.param_name }}"
                                    id="Filter-{{ filter.label | escape }}-LTE"
                                    {%- if filter.max_value.value -%}
                                      {%- if uses_comma_decimals -%}
                                        value="{{ filter.max_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                      {%- else -%}
                                        value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"
                                      {%- endif %}
                                    {%- endif -%}
                                    type="number"
                                    min="0"
                                    {%- if uses_comma_decimals -%}
                                      placeholder="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                      max="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                    {%- else -%}
                                      placeholder="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                                      max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                                    {% endif %}
                                  >
                                  <label class="field__label" for="Filter-{{ filter.label | escape }}-LTE">
                                    'products.facets.to' | t -}}
                                  </label>
                                </div>
                              </price-range>
                            </div>
                          </details>
                      {% endcase %}
                    {%- endfor -%}
                    <noscript>
                      <button type="submit" class="facets__button-no-js button button--secondary">
                        'products.facets.filter_button' | t 
                      </button>
                    </noscript>
                  </div>
                  {% comment %} Pills after filtes on filter type horizontal {% endcomment %}
                  {%- if filter_type == 'horizontal' -%}
                    <div class="active-facets active-facets-desktop">
                      {%- for filter in results.filters -%}
                        {%- for value in filter.active_values -%}
                          <facet-remove>
                            <a
                              href="{{ value.url_to_remove }}"
                              class="active-facets__button active-facets__button--light"
                            >
                              <span class="active-facets__button-inner button button--tertiary">
                                {{ filter.label }}: {{ value.label | escape }}
                                <svg
                                  aria-hidden="true"
                                  focusable="false"
                                  width="12"
                                  height="13"
                                  class="icon icon-close-small"
                                  viewBox="0 0 12 13"
                                  fill="none"
                                  xmlns="http://www.w3.org/2000/svg"
                                >
                                  <path d="M8.48627 9.32917L2.82849 3.67098" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                  <path d="M2.88539 9.38504L8.42932 3.61524" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>

                                <span class="visually-hidden">'products.facets.clear_filter' | t </span>
                              </span>
                            </a>
                          </facet-remove>
                        {%- endfor -%}
                        {% if filter.type == 'price_range' %}
                          {%- if filter.min_value.value != null or filter.max_value.value != null -%}
                            <facet-remove>
                              <a
                                href="{{ filter.url_to_remove }}"
                                class="active-facets__button active-facets__button--light"
                              >
                                <span class="active-facets__button-inner button button--tertiary">
                                  {%- if filter.min_value.value -%}
                                    {{ filter.min_value.value | money }}
                                  {%- else -%}
                                    {{ 0 | money }}
                                  {%- endif -%}
                                  -
                                  {%- if filter.max_value.value -%}
                                    {{ filter.max_value.value | money }}
                                  {%- else -%}
                                    {{ filter.range_max | money }}
                                  {%- endif -%}
                                  <svg
                                    aria-hidden="true"
                                    focusable="false"
                                    width="12"
                                    height="13"
                                    class="icon icon-close-small"
                                    viewBox="0 0 12 13"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                  >
                                    <path d="M8.48627 9.32917L2.82849 3.67098" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M2.88539 9.38504L8.42932 3.61524" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                  </svg>

                                  <span class="visually-hidden">'products.facets.clear_filter' | t </span>
                                </span>
                              </a>
                            </facet-remove>
                          {%- endif -%}
                        {% endif %}
                      {%- endfor -%}
                      <facet-remove class="active-facets__button-wrapper">
                        <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
                          <span>'products.facets.clear_all' | t </span>
                        </a>
                      </facet-remove>
                    </div>
                  {%- endif -%}
                {% endif %}

                {% if results.current_vendor or results.current_type %}
                  <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
                {% endif %}

                {%- if filter_type == 'horizontal' -%}
                  {% comment %} Sorting and product count are the last elements when filter type is horizontal {% endcomment %}
                  {%- if enable_sorting -%}
                    <div class="facet-filters sorting caption">
                      <div class="facet-filters__field">
                        <h2 class="facet-filters__label caption-large text-body">
                          <label for="SortBy">'products.facets.sort_by_label' | t </label>
                        </h2>
                        <div class="select">
                          {%- assign sort_by = results.sort_by | default: results.default_sort_by -%}
                          <select
                            name="sort_by"
                            class="facet-filters__sort select__select caption-large"
                            id="SortBy"
                            aria-describedby="a11y-refresh-page-message"
                          >
                            {%- for option in results.sort_options -%}
                              <option
                                value="{{ option.value | escape }}"
                                {% if option.value == sort_by %}
                                  selected="selected"
                                {% endif %}
                              >
                                {{ option.name | escape }}
                              </option>
                            {%- endfor -%}
                          </select>
                          <svg aria-hidden="true" focusable="false" class="icon icon-caret" viewBox="0 0 10 6">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                          </svg>
                        </div>
                      </div>

                      <noscript>
                        <button type="submit" class="facets__button-no-js button button--secondary">
                          'products.facets.sort_button' | t 
                        </button>
                      </noscript>
                    </div>
                  {%- endif -%}
                  <div class="product-count light" role="status">
                    <h2 class="product-count__text text-body">
                      <span id="ProductCountDesktop">
                        {%- if results.results_count -%}
                          {{
                            'templates.search.results_with_count'
                            | t: terms: results.terms, count: results.results_count
                          }}
                        {%- elsif results.products_count == results.all_products_count -%}
                          'products.facets.product_count_simple' | t: count: results.products_count 
                        {%- else -%}
                          {{
                            'products.facets.product_count'
                            | t: product_count: results.products_count, count: results.all_products_count
                          }}
                        {%- endif -%}
                      </span>
                    </h2>
                    <div class="loading-overlay__spinner">
                      <svg
                        aria-hidden="true"
                        focusable="false"
                        class="spinner"
                        viewBox="0 0 66 66"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                      </svg>
                    </div>
                  </div>
                {%- endif -%}
              </form>
            </facet-filters-form>
            {% comment %} Sorting for vertical filter are grouped with filter when no JS{% endcomment %}
            {%- if enable_sorting and filter_type == 'vertical' -%}
              <facet-filters-form class="small-hide">
                <form class="no-js">
                  <div class="facet-filters sorting caption">
                    <div class="facet-filters__field">
                      <h2 class="facet-filters__label caption-large text-body">
                        <label for="SortBy">'products.facets.sort_by_label' | t </label>
                      </h2>
                      <div class="select">
                        {%- assign sort_by = results.sort_by | default: results.default_sort_by -%}
                        <select
                          name="sort_by"
                          class="facet-filters__sort select__select caption-large"
                          id="SortBy"
                          aria-describedby="a11y-refresh-page-message"
                        >
                          {%- for option in results.sort_options -%}
                            <option
                              value="{{ option.value | escape }}"
                              {% if option.value == sort_by %}
                                selected="selected"
                              {% endif %}
                            >
                              {{ option.name | escape }}
                            </option>
                          {%- endfor -%}
                        </select>
                        <svg aria-hidden="true" focusable="false" class="icon icon-caret" viewBox="0 0 10 6">
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                        </svg>
                      </div>
                    </div>

                    <noscript>
                      <button type="submit" class="facets__button-no-js button button--secondary">
                        'products.facets.sort_button' | t 
                      </button>
                    </noscript>
                  </div>

                  {% if results.current_vendor or results.current_type %}
                    <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
                  {% endif %}

                  {%- if results.terms -%}
                    <input type="hidden" name="q" value="{{ results.terms | escape }}">
                    <input name="options[prefix]" type="hidden" value="last">
                  {%- endif -%}
                </form>
              </facet-filters-form>
            {%- endif -%}
          {%- endif -%}
          {% comment %}  Drawer and mobile filter {% endcomment %}
          <menu-drawer
            class="mobile-facets__wrapper{% if filter_type == 'horizontal' or filter_type == 'vertical' %} medium-hide large-up-hide{% endif %}"
            data-breakpoint="mobile"
          >
            <details class="mobile-facets__disclosure disclosure-has-popup">
              <summary class="mobile-facets__open-wrapper focus-offset">
                <span class="mobile-facets__open{% if filter_type == 'drawer' and enable_filtering == false %} medium-hide large-up-hide{% endif %}">
                  <svg
                    class="icon icon-filter"
                    aria-hidden="true"
                    focusable="false"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20"
                    fill="none"
                  >
                    <path fill-rule="evenodd" d="M4.833 6.5a1.667 1.667 0 1 1 3.334 0 1.667 1.667 0 0 1-3.334 0ZM4.05 7H2.5a.5.5 0 0 1 0-1h1.55a2.5 2.5 0 0 1 4.9 0h8.55a.5.5 0 0 1 0 1H8.95a2.5 2.5 0 0 1-4.9 0Zm11.117 6.5a1.667 1.667 0 1 0-3.334 0 1.667 1.667 0 0 0 3.334 0ZM13.5 11a2.5 2.5 0 0 1 2.45 2h1.55a.5.5 0 0 1 0 1h-1.55a2.5 2.5 0 0 1-4.9 0H2.5a.5.5 0 0 1 0-1h8.55a2.5 2.5 0 0 1 2.45-2Z" fill="currentColor"/>
                  </svg>

                  <span class="mobile-facets__open-label button-label medium-hide large-up-hide">
                    {%- if enable_filtering and enable_sorting -%}
                      'products.facets.filter_and_sort' | t 
                    {%- elsif enable_filtering -%}
                      'products.facets.filter_button' | t 
                    {%- elsif enable_sorting -%}
                      'products.facets.sort_button' | t 
                    {%- endif -%}
                  </span>
                  <span class="mobile-facets__open-label button-label small-hide">
                    {%- if enable_filtering -%}
                      'products.facets.filter_button' | t 
                    {%- endif -%}
                  </span>
                </span>
                <span tabindex="0" class="mobile-facets__close mobile-facets__close--no-js">
                  {%- render 'icon-close' -%}
                </span>
              </summary>
              <facet-filters-form>
                <form id="FacetFiltersFormMobile" class="mobile-facets">
                  <div class="mobile-facets__inner gradient">
                    <div class="mobile-facets__header">
                      <div class="mobile-facets__header-inner">
                        <h2 class="mobile-facets__heading medium-hide large-up-hide">
                          {%- if enable_filtering and enable_sorting -%}
                            'products.facets.filter_and_sort' | t 
                          {%- elsif enable_filtering -%}
                            'products.facets.filter_button' | t 
                          {%- elsif enable_sorting -%}
                            'products.facets.sort_button' | t 
                          {%- endif -%}
                        </h2>
                        <h2 class="mobile-facets__heading small-hide">
                          {%- if enable_filtering -%}
                            'products.facets.filter_button' | t 
                          {%- endif -%}
                        </h2>
                        <p class="mobile-facets__count">
                          {%- if results.results_count -%}
                            {{
                              'templates.search.results_with_count'
                              | t: terms: results.terms, count: results.results_count
                            }}
                          {%- elsif results.products_count == results.all_products_count -%}
                            'products.facets.product_count_simple' | t: count: results.products_count 
                          {%- else -%}
                            {{
                              'products.facets.product_count'
                              | t: product_count: results.products_count, count: results.all_products_count
                            }}
                          {%- endif -%}
                        </p>
                      </div>
                    </div>
                    <div class="mobile-facets__main has-submenu gradient">
                      {%- if enable_filtering -%}
                        {%- for filter in results.filters -%}
                          {% case filter.type %}
                            {% when 'boolean', 'list' %}
                              <details
                                id="Details-Mobile-{{ forloop.index }}-{{ section.id }}"
                                class="mobile-facets__details js-filter"
                                data-index="mobile-{{ forloop.index }}"
                              >
                                <summary class="mobile-facets__summary focus-inset">
                                  <div>
                                    <span>{{ filter.label | escape }}</span>
                                    <span class="mobile-facets__arrow no-js-hidden">
                                      <svg
                                        viewBox="0 0 14 10"
                                        fill="none"
                                        aria-hidden="true"
                                        focusable="false"
                                        class="icon icon-arrow"
                                        xmlns="http://www.w3.org/2000/svg"
                                      >
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.537.808a.5.5 0 01.817-.162l4 4a.5.5 0 010 .708l-4 4a.5.5 0 11-.708-.708L11.793 5.5H1a.5.5 0 010-1h10.793L8.646 1.354a.5.5 0 01-.109-.546z" fill="currentColor">
                                      </svg>
                                    </span>
                                    <noscript>
                                      <svg
                                        aria-hidden="true"
                                        focusable="false"
                                        class="icon icon-caret"
                                        viewBox="0 0 10 6"
                                      >
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                                      </svg>
                                    </noscript>
                                  </div>
                                </summary>
                                <div
                                  id="FacetMobile-{{ forloop.index }}-{{ section.id }}"
                                  class="mobile-facets__submenu gradient"
                                >
                                  <button
                                    class="mobile-facets__close-button link link--text focus-inset"
                                    aria-expanded="true"
                                    type="button"
                                  >
                                    <svg
                                      viewBox="0 0 14 10"
                                      fill="none"
                                      aria-hidden="true"
                                      focusable="false"
                                      class="icon icon-arrow"
                                      xmlns="http://www.w3.org/2000/svg"
                                    >
                                      <path fill-rule="evenodd" clip-rule="evenodd" d="M8.537.808a.5.5 0 01.817-.162l4 4a.5.5 0 010 .708l-4 4a.5.5 0 11-.708-.708L11.793 5.5H1a.5.5 0 010-1h10.793L8.646 1.354a.5.5 0 01-.109-.546z" fill="currentColor">
                                    </svg>

                                    {{ filter.label | escape }}
                                  </button>
                                  <ul class="mobile-facets__list list-unstyled" role="list">
                                    {%- for value in filter.values -%}
                                      <li class="mobile-facets__item list-menu__item">
                                        <label
                                          for="Filter-{{ filter.param_name | escape }}-mobile-{{ forloop.index }}"
                                          class="mobile-facets__label{% if value.count == 0 and value.active == false %} mobile-facets__label--disabled{% endif %}"
                                        >
                                          <input
                                            class="mobile-facets__checkbox"
                                            type="checkbox"
                                            name="{{ value.param_name }}"
                                            value="{{ value.value }}"
                                            id="Filter-{{ filter.param_name | escape }}-mobile-{{ forloop.index }}"
                                            {% if value.active %}
                                              checked
                                            {% endif %}
                                            {% if value.count == 0 and value.active == false %}
                                              disabled
                                            {% endif %}
                                          >

                                          <span class="mobile-facets__highlight"></span>

                                          <svg
                                            width="1.6rem"
                                            height="1.6rem"
                                            viewBox="0 0 16 16"
                                            aria-hidden="true"
                                            focusable="false"
                                          >
                                            <rect width="16" height="16" stroke="currentColor" fill="none" stroke-width="1"></rect>
                                          </svg>

                                          <svg
                                            aria-hidden="true"
                                            class="icon icon-checkmark"
                                            width="1.1rem"
                                            height="0.7rem"
                                            viewBox="0 0 11 7"
                                            fill="none"
                                            xmlns="http://www.w3.org/2000/svg"
                                          >
                                            <path d="M1.5 3.5L2.83333 4.75L4.16667 6L9.5 1" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" />
                                          </svg>

                                          <span aria-hidden="true">{{ value.label | escape }} ({{ value.count }})</span>
                                          <span class="visually-hidden">
                                            {{- value.label | escape }} (
                                            {%- if value.count == '1' -%}
                                              'products.facets.product_count_simple.one' | t: count: value.count 
                                            {%- else -%}
                                              {{-
                                                'products.facets.product_count_simple.other'
                                                | t: count: value.count
                                              -}}
                                            {%- endif -%}
                                            )</span
                                          >
                                        </label>
                                      </li>
                                    {%- endfor -%}
                                  </ul>

                                  <div class="no-js-hidden mobile-facets__footer gradient">
                                    <facet-remove class="mobile-facets__clear-wrapper">
                                      <a href="{{ filter.url_to_remove }}" class="mobile-facets__clear underlined-link">
                                        'products.facets.clear' | t -}}
                                      </a>
                                    </facet-remove>
                                    <button
                                      type="button"
                                      class="no-js-hidden button button--primary"
                                      onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
                                    >
                                      'products.facets.apply' | t 
                                    </button>
                                    <noscript
                                      ><button class="button button--primary">
                                        'products.facets.apply' | t 
                                      </button></noscript
                                    >
                                  </div>
                                </div>
                              </details>
                            {% when 'price_range' %}
                              <details
                                id="Details-Mobile-{{ forloop.index }}-{{ section.id }}"
                                class="mobile-facets__details js-filter"
                                data-index="mobile-{{ forloop.index }}"
                              >
                                <summary class="mobile-facets__summary focus-inset">
                                  <div>
                                    <span>{{ filter.label | escape }}</span>
                                    <span class="mobile-facets__arrow no-js-hidden">
                                      <svg
                                        viewBox="0 0 14 10"
                                        fill="none"
                                        aria-hidden="true"
                                        focusable="false"
                                        class="icon icon-arrow"
                                        xmlns="http://www.w3.org/2000/svg"
                                      >
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.537.808a.5.5 0 01.817-.162l4 4a.5.5 0 010 .708l-4 4a.5.5 0 11-.708-.708L11.793 5.5H1a.5.5 0 010-1h10.793L8.646 1.354a.5.5 0 01-.109-.546z" fill="currentColor">
                                      </svg>
                                    </span>
                                    <noscript>
                                      <svg
                                        aria-hidden="true"
                                        focusable="false"
                                        class="icon icon-caret"
                                        viewBox="0 0 10 6"
                                      >
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                                      </svg>
                                    </noscript>
                                  </div>
                                </summary>
                                <div
                                  id="FacetMobile-{{ forloop.index }}-{{ section.id }}"
                                  class="mobile-facets__submenu gradient"
                                >
                                  <button
                                    class="mobile-facets__close-button link link--text focus-inset"
                                    aria-expanded="true"
                                    type="button"
                                  >
                                    <svg
                                      viewBox="0 0 14 10"
                                      fill="none"
                                      aria-hidden="true"
                                      focusable="false"
                                      class="icon icon-arrow"
                                      xmlns="http://www.w3.org/2000/svg"
                                    >
                                      <path fill-rule="evenodd" clip-rule="evenodd" d="M8.537.808a.5.5 0 01.817-.162l4 4a.5.5 0 010 .708l-4 4a.5.5 0 11-.708-.708L11.793 5.5H1a.5.5 0 010-1h10.793L8.646 1.354a.5.5 0 01-.109-.546z" fill="currentColor">
                                    </svg>

                                    {{ filter.label | escape }}
                                  </button>

                                  {%- assign max_price_amount = filter.range_max | money | strip_html | escape -%}
                                  <p class="mobile-facets__info">
                                    'products.facets.max_price' | t: price: max_price_amount 
                                  </p>

                                  <price-range class="facets__price">
                                    <span class="field-currency">{{ cart.currency.symbol }}</span>
                                    <div class="field">
                                      <input
                                        class="field__input"
                                        name="{{ filter.min_value.param_name }}"
                                        id="Mobile-Filter-{{ filter.label | escape }}-GTE"
                                        {%- if filter.min_value.value -%}
                                          {%- if uses_comma_decimals -%}
                                            value="{{ filter.min_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                          {%- else -%}
                                            value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"
                                          {%- endif %}
                                        {%- endif -%}
                                        type="number"
                                        placeholder="0"
                                        min="0"
                                        inputmode="decimal"
                                        {%- if uses_comma_decimals -%}
                                          max="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                        {%- else -%}
                                          max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                                        {% endif %}
                                      >
                                      <label class="field__label" for="Mobile-Filter-{{ filter.label | escape }}-GTE">
                                        'products.facets.from' | t -}}
                                      </label>
                                    </div>

                                    <span class="field-currency">{{ cart.currency.symbol }}</span>
                                    <div class="field">
                                      <input
                                        class="field__input"
                                        name="{{ filter.max_value.param_name }}"
                                        id="Mobile-Filter-{{ filter.label | escape }}-LTE"
                                        {%- if filter.max_value.value -%}
                                          {%- if uses_comma_decimals -%}
                                            value="{{ filter.max_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                          {%- else -%}
                                            value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"
                                          {%- endif %}
                                        {%- endif -%}
                                        type="number"
                                        min="0"
                                        inputmode="decimal"
                                        {%- if uses_comma_decimals -%}
                                          placeholder="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                          max="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                        {%- else -%}
                                          placeholder="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                                          max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                                        {% endif %}
                                      >
                                      <label class="field__label" for="Mobile-Filter-{{ filter.label | escape }}-LTE">
                                        'products.facets.to' | t -}}
                                      </label>
                                    </div>
                                  </price-range>
                                  <div class="no-js-hidden mobile-facets__footer">
                                    <facet-remove class="mobile-facets__clear-wrapper">
                                      <a href="{{ filter.url_to_remove }}" class="mobile-facets__clear underlined-link">
                                        'products.facets.clear' | t -}}
                                      </a>
                                    </facet-remove>
                                    <button
                                      type="button"
                                      class="no-js-hidden button button--primary"
                                      onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
                                    >
                                      'products.facets.apply' | t 
                                    </button>
                                    <noscript
                                      ><button class="button button--primary">
                                        'products.facets.apply' | t 
                                      </button></noscript
                                    >
                                  </div>
                                </div>
                              </details>
                          {% endcase %}
                        {%- endfor -%}
                      {%- endif -%}

                      {%- if enable_sorting -%}
                        <div
                          class="mobile-facets__details js-filter{% if filter_type == 'drawer' %} medium-hide large-up-hide{% endif %}"
                          data-index="mobile-{{ forloop.index }}"
                        >
                          <div class="mobile-facets__summary">
                            <div class="mobile-facets__sort">
                              <label for="SortBy-mobile">'products.facets.sort_by_label' | t </label>
                              <div class="select">
                                <select
                                  name="sort_by"
                                  class="select__select"
                                  id="SortBy-mobile"
                                  aria-describedby="a11y-refresh-page-message"
                                >
                                  {%- for option in results.sort_options -%}
                                    <option
                                      value="{{ option.value | escape }}"
                                      {% if option.value == sort_by %}
                                        selected="selected"
                                      {% endif %}
                                    >
                                      {{ option.name | escape }}
                                    </option>
                                  {%- endfor -%}
                                </select>
                                <svg aria-hidden="true" focusable="false" class="icon icon-caret" viewBox="0 0 10 6">
                                  <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                                </svg>
                              </div>
                            </div>
                          </div>
                        </div>
                      {%- endif -%}

                      <div class="mobile-facets__footer">
                        <facet-remove class="mobile-facets__clear-wrapper">
                          <a href="{{ results_url }}" class="mobile-facets__clear underlined-link">
                            'products.facets.clear_all' | t -}}
                          </a>
                        </facet-remove>
                        <button
                          type="button"
                          class="no-js-hidden button button--primary"
                          onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
                        >
                          'products.facets.apply' | t 
                        </button>
                        <noscript
                          ><button class="button button--primary">'products.facets.apply' | t </button></noscript
                        >
                      </div>
                    </div>

                    {% if results.current_vendor or results.current_type %}
                      <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
                    {% endif %}

                    {%- if results.terms -%}
                      <input type="hidden" name="q" value="{{ results.terms | escape }}">
                      <input name="options[prefix]" type="hidden" value="last">
                    {%- endif -%}
                  </div>
                </form>
              </facet-filters-form>
            </details>
          </menu-drawer>

          <div class="active-facets active-facets-mobile medium-hide large-up-hide">
            {%- for filter in results.filters -%}
              {%- for value in filter.active_values -%}
                <facet-remove>
                  <a href="{{ value.url_to_remove }}" class="active-facets__button active-facets__button--light">
                    <span class="active-facets__button-inner button button--tertiary">
                      {{ filter.label }}: {{ value.label | escape }}
                      <svg
                        aria-hidden="true"
                        focusable="false"
                        width="12"
                        height="13"
                        class="icon icon-close-small"
                        viewBox="0 0 12 13"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path d="M8.48627 9.32917L2.82849 3.67098" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2.88539 9.38504L8.42932 3.61524" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>

                      <span class="visually-hidden">'products.facets.clear_filter' | t </span>
                    </span>
                  </a>
                </facet-remove>
              {%- endfor -%}

              {%- if filter.type == 'price_range' -%}
                {%- if filter.min_value.value != null or filter.max_value.value != null -%}
                  <facet-remove>
                    <a href="{{ filter.url_to_remove }}" class="active-facets__button active-facets__button--light">
                      <span class="active-facets__button-inner button button--tertiary">
                        {%- if filter.min_value.value -%}
                          {{ filter.min_value.value | money }}
                        {%- else -%}
                          {{ 0 | money }}
                        {%- endif -%}
                        -
                        {%- if filter.max_value.value -%}
                          {{ filter.max_value.value | money }}
                        {%- else -%}
                          {{ filter.range_max | money }}
                        {%- endif -%}
                        <svg
                          aria-hidden="true"
                          focusable="false"
                          width="12"
                          height="13"
                          class="icon icon-close-small"
                          viewBox="0 0 12 13"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path d="M8.48627 9.32917L2.82849 3.67098" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                          <path d="M2.88539 9.38504L8.42932 3.61524" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>

                        <span class="visually-hidden">'products.facets.clear_filter' | t </span>
                      </span>
                    </a>
                  </facet-remove>
                {%- endif -%}
              {%- endif -%}
            {%- endfor -%}
            <facet-remove class="active-facets__button-wrapper">
              <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
                <span>'products.facets.clear_all' | t </span>
              </a>
            </facet-remove>
          </div>
          {% comment %} Sort, product count and filter pills at the end when filter is type of Drawer for the correct tabbing order {% endcomment %}
          {%- if enable_sorting and filter_type == 'drawer' -%}
            <facet-filters-form class="facets small-hide">
              <form id="FacetSortDrawerForm" class="facets__form">
                <div class="facet-filters sorting caption small-hide">
                  <div class="facet-filters__field">
                    <h2 class="facet-filters__label caption-large text-body">
                      <label for="SortBy">'products.facets.sort_by_label' | t </label>
                    </h2>
                    <div class="select">
                      {%- assign sort_by = results.sort_by | default: results.default_sort_by -%}
                      <select
                        name="sort_by"
                        class="facet-filters__sort select__select caption-large"
                        id="SortBy"
                        aria-describedby="a11y-refresh-page-message"
                      >
                        {%- for option in results.sort_options -%}
                          <option
                            value="{{ option.value | escape }}"
                            {% if option.value == sort_by %}
                              selected="selected"
                            {% endif %}
                          >
                            {{ option.name | escape }}
                          </option>
                        {%- endfor -%}
                      </select>
                      <svg aria-hidden="true" focusable="false" class="icon icon-caret" viewBox="0 0 10 6">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                      </svg>
                    </div>
                  </div>

                  <noscript>
                    <button type="submit" class="facets__button-no-js button button--secondary">
                      'products.facets.sort_button' | t 
                    </button>
                  </noscript>
                </div>

                {% if results.current_vendor or results.current_type %}
                  <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
                {% endif %}

                {%- if results.terms -%}
                  <input type="hidden" name="q" value="{{ results.terms | escape }}">
                  <input name="options[prefix]" type="hidden" value="last">
                {%- endif -%}
              </form>
            </facet-filters-form>
          {%- endif -%}
          <div
            class="product-count light{% if filter_type == 'vertical' or filter_type == 'horizontal' %} medium-hide large-up-hide{% endif %}"
            role="status"
          >
            <h2 class="product-count__text text-body">
              <span id="ProductCount">
                {%- if results.results_count -%}
                  'templates.search.results_with_count' | t: terms: results.terms, count: results.results_count 
                {%- elsif results.products_count == results.all_products_count -%}
                  'products.facets.product_count_simple' | t: count: results.products_count 
                {%- else -%}
                  {{
                    'products.facets.product_count'
                    | t: product_count: results.products_count, count: results.all_products_count
                  }}
                {%- endif -%}
              </span>
            </h2>
            <div class="loading-overlay__spinner">
              <svg
                aria-hidden="true"
                focusable="false"
                class="spinner"
                viewBox="0 0 66 66"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
              </svg>
            </div>
          </div>
          {%- if filter_type == 'drawer' -%}
            <facet-filters-form class="facets facets-pill small-hide">
              <form id="FacetFiltersPillsForm" class="facets__form">
                <div class="active-facets active-facets-desktop">
                  {%- for filter in results.filters -%}
                    {%- for value in filter.active_values -%}
                      <facet-remove>
                        <a href="{{ value.url_to_remove }}" class="active-facets__button active-facets__button--light">
                          <span class="active-facets__button-inner button button--tertiary">
                            {{ filter.label }}: {{ value.label | escape }}
                            <svg
                              aria-hidden="true"
                              focusable="false"
                              width="12"
                              height="13"
                              class="icon icon-close-small"
                              viewBox="0 0 12 13"
                              fill="none"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <path d="M8.48627 9.32917L2.82849 3.67098" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M2.88539 9.38504L8.42932 3.61524" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>

                            <span class="visually-hidden">'products.facets.clear_filter' | t </span>
                          </span>
                        </a>
                      </facet-remove>
                    {%- endfor -%}

                    {%- if filter.type == 'price_range' -%}
                      {%- if filter.min_value.value != null or filter.max_value.value != null -%}
                        <facet-remove>
                          <a
                            href="{{ filter.url_to_remove }}"
                            class="active-facets__button active-facets__button--light"
                          >
                            <span class="active-facets__button-inner button button--tertiary">
                              {%- if filter.min_value.value -%}
                                {{ filter.min_value.value | money }}
                              {%- else -%}
                                {{ 0 | money }}
                              {%- endif -%}
                              -
                              {%- if filter.max_value.value -%}
                                {{ filter.max_value.value | money }}
                              {%- else -%}
                                {{ filter.range_max | money }}
                              {%- endif -%}
                              <svg
                                aria-hidden="true"
                                focusable="false"
                                width="12"
                                height="13"
                                class="icon icon-close-small"
                                viewBox="0 0 12 13"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                              >
                                <path d="M8.48627 9.32917L2.82849 3.67098" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M2.88539 9.38504L8.42932 3.61524" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                              </svg>

                              <span class="visually-hidden">'products.facets.clear_filter' | t </span>
                            </span>
                          </a>
                        </facet-remove>
                      {%- endif -%}
                    {%- endif -%}
                  {%- endfor -%}
                  <facet-remove class="active-facets__button-wrapper">
                    <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
                      <span>'products.facets.clear_all' | t </span>
                    </a>
                  </facet-remove>
                </div>
              </form>
            </facet-filters-form>
          {%- endif -%}
        </div>
      </aside>
    {%- endif -%}

    <div class="product-grid-container" id="ProductGridContainer">
      {%- paginate collection.products by section.settings.products_per_page -%}
        {%- if collection.products.size == 0 -%}
          <div class="collection collection--empty page-width" id="product-grid" data-id="{{ section.id }}">
            <div class="loading-overlay gradient"></div>
            <div class="title-wrapper center">
              <h2 class="title title--primary">
                'sections.collection_template.empty' | t -}}
                <br>
                {{
                  'sections.collection_template.use_fewer_filters_html'
                  | t: link: collection.url, class: 'underlined-link link'
                }}
              </h2>
            </div>
          </div>
        {%- else -%}
          <div class="collection{% if section.settings.filter_type != 'vertical' %} page-width{% endif %}">
            <div class="loading-overlay gradient"></div>

            <ul
              id="product-grid"
              data-id="{{ section.id }}"
              class="
                grid product-grid grid--{{ section.settings.columns_mobile }}-col-tablet-down
                grid--{{ section.settings.columns_desktop }}-col-desktop
              "
            >
              {%- for product in collection.products -%}
                {% assign lazy_load = false %}
                {%- if forloop.index > 2 -%}
                  {%- assign lazy_load = true -%}
                {%- endif -%}
                <li class="grid__item">
                  {% comment %} {% render 'card-product',
                    card_product: product,
                    media_aspect_ratio: section.settings.image_ratio,
                    show_secondary_image: section.settings.show_secondary_image,
                    show_vendor: section.settings.show_vendor,
                    show_rating: section.settings.show_rating,
                    lazy_load: lazy_load,
                    show_quick_add: section.settings.enable_quick_add,
                    section_id: section.id
                  %} {% endcomment %}
                  {%  render 'cart-product-grid-item', product: product %}
                </li>
              {%- endfor -%}
            </ul>

            {%- if paginate.pages > 1 -%}
              {%- assign paginate = paginate -%}

              {% comment %} 'component-pagination.css' | asset_url | stylesheet_tag }} {% endcomment %}

              {%- if paginate.parts.size > 0 -%}
                <div class="pagination-wrapper">
                  <nav class="pagination" role="navigation" aria-label="pagination">
                    <ul class="pagination__list list-unstyled" role="list">
                      {%- if paginate.previous -%}
                        <li>
                          <a
                            href="{{ paginate.previous.url }}{{ anchor }}"
                            class="pagination__item pagination__item--next pagination__item-arrow link motion-reduce"
                            aria-label="'general.pagination.previous' | t "
                          >
                            <svg aria-hidden="true" focusable="false" class="icon icon-caret" viewBox="0 0 10 6">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                            </svg>
                          </a>
                        </li>
                      {%- endif -%}

                      {%- for part in paginate.parts -%}
                        <li>
                          {%- if part.is_link -%}
                            <a
                              href="{{ part.url }}{{ anchor }}"
                              class="pagination__item link"
                            >
                              {{- part.title -}}
                            </a>
                          {%- else -%}
                            {%- if part.title == paginate.current_page -%}
                              <a
                                role="link"
                                aria-disabled="true"
                                class="pagination__item pagination__item--current light"
                                aria-current="page"
                              >
                                {{- part.title -}}
                              </a>
                            {%- else -%}
                              <span class="pagination__item">{{ part.title }}</span>
                            {%- endif -%}
                          {%- endif -%}
                        </li>
                      {%- endfor -%}

                      {%- if paginate.next -%}
                        <li>
                          <a
                            href="{{ paginate.next.url }}{{ anchor }}"
                            class="pagination__item pagination__item--prev pagination__item-arrow link motion-reduce"
                            aria-label="'general.pagination.next' | t "
                          >
                            {%- render 'icon-caret' -%}
                          </a>
                        </li>
                      {%- endif -%}
                    </ul>
                  </nav>
                </div>
              {%- endif -%}
            {%- endif -%}
          </div>
        {%- endif -%}
      {%- endpaginate -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.main-collection-product-grid.name",
  "class": "section",
  "settings": [
    {
      "type": "range",
      "id": "products_per_page",
      "min": 8,
      "max": 24,
      "step": 4,
      "default": 16,
      "label": "t:sections.main-collection-product-grid.settings.products_per_page.label"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 1,
      "max": 5,
      "step": 1,
      "default": 4,
      "label": "t:sections.main-collection-product-grid.settings.columns_desktop.label"
    },
    {
      "type": "header",
      "content": "t:sections.main-collection-product-grid.settings.header__3.content"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "t:sections.main-collection-product-grid.settings.image_ratio.options__1.label"
        },
        {
          "value": "portrait",
          "label": "t:sections.main-collection-product-grid.settings.image_ratio.options__2.label"
        },
        {
          "value": "square",
          "label": "t:sections.main-collection-product-grid.settings.image_ratio.options__3.label"
        }
      ],
      "default": "adapt",
      "label": "t:sections.main-collection-product-grid.settings.image_ratio.label"
    },
    {
      "type": "checkbox",
      "id": "show_secondary_image",
      "default": false,
      "label": "t:sections.main-collection-product-grid.settings.show_secondary_image.label"
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "default": false,
      "label": "t:sections.main-collection-product-grid.settings.show_vendor.label"
    },
    {
      "type": "checkbox",
      "id": "show_rating",
      "default": false,
      "label": "t:sections.main-collection-product-grid.settings.show_rating.label",
      "info": "t:sections.main-collection-product-grid.settings.show_rating.info"
    },
    {
      "type": "checkbox",
      "id": "enable_quick_add",
      "default": false,
      "label": "t:sections.main-collection-product-grid.settings.enable_quick_buy.label"
    },
    {
      "type": "header",
      "content": "t:sections.main-collection-product-grid.settings.header__1.content"
    },
    {
      "type": "checkbox",
      "id": "enable_filtering",
      "default": true,
      "label": "t:sections.main-collection-product-grid.settings.enable_filtering.label",
      "info": "t:sections.main-collection-product-grid.settings.enable_filtering.info"
    },
    {
      "type": "select",
      "id": "filter_type",
      "options": [
        {
          "value": "horizontal",
          "label": "t:sections.main-collection-product-grid.settings.filter_type.options__1.label"
        },
        {
          "value": "vertical",
          "label": "t:sections.main-collection-product-grid.settings.filter_type.options__2.label"
        },
        {
          "value": "drawer",
          "label": "t:sections.main-collection-product-grid.settings.filter_type.options__3.label"
        }
      ],
      "default": "horizontal",
      "label": "t:sections.main-collection-product-grid.settings.filter_type.label",
      "info": "t:sections.main-collection-product-grid.settings.filter_type.info"
    },
    {
      "type": "checkbox",
      "id": "enable_sorting",
      "default": true,
      "label": "t:sections.main-collection-product-grid.settings.enable_sorting.label"
    },
    {
      "type": "header",
      "content": "t:sections.main-collection-product-grid.settings.header_mobile.content"
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "default": "2",
      "label": "t:sections.main-collection-product-grid.settings.columns_mobile.label",
      "options": [
        {
          "value": "1",
          "label": "t:sections.main-collection-product-grid.settings.columns_mobile.options__1.label"
        },
        {
          "value": "2",
          "label": "t:sections.main-collection-product-grid.settings.columns_mobile.options__2.label"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ]
}
{% endschema %}
